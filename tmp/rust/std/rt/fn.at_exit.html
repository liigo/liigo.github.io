<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="The std library documentation.">

    <title>std::rt::at_exit - Rust</title>

    <link rel="stylesheet" type="text/css" href="../../main.css">

    <link rel="shortcut icon" href="http://www.rust-lang.org/favicon.ico">
    
</head>
<body>
    <!--[if lte IE 8]>
    <div class="warning">
        This old browser is unsupported and will most likely display funky
        things.
    </div>
    <![endif]-->

    

    <section class="sidebar">
        <a href='../../std/index.html'><img src='http://www.rust-lang.org/logos/rust-logo-128x128-blk-v2.png' alt='' width='100'></a>
        <p class='location'><a href='../index.html'>std</a>&#8203;::<a href='index.html'>rt</a></p><div class='block mod'><h2>Modules</h2><a class='mod ' href='args/index.html' title='Global storage for command line arguments'>args</a><a class='mod ' href='backtrace/index.html' title='Simple backtrace functionality (to print on failure)'>backtrace</a><a class='mod ' href='bookkeeping/index.html' title='Task bookkeeping'>bookkeeping</a><a class='mod ' href='exclusive/index.html' title=''>exclusive</a><a class='mod ' href='heap/index.html' title=''>heap</a><a class='mod ' href='libc_heap/index.html' title='The global (exchange) heap.'>libc_heap</a><a class='mod ' href='local/index.html' title=''>local</a><a class='mod ' href='mutex/index.html' title='A native mutex and condition variable type.'>mutex</a><a class='mod ' href='rtio/index.html' title='The EventLoop and internal synchronous I/O interface.'>rtio</a><a class='mod ' href='stack/index.html' title='Rust stack-limit management'>stack</a><a class='mod ' href='task/index.html' title='Language-level runtime services that should reasonably expected to be available 'everywhere'. Local heaps, GC, unwinding, local storage, and logging. Even a 'freestanding' Rust would likely want to implement this.'>task</a><a class='mod ' href='thread/index.html' title='Native os-thread management'>thread</a><a class='mod ' href='unwind/index.html' title='Implementation of Rust stack unwinding'>unwind</a></div><div class='block struct'><h2>Structs</h2><a class='struct ' href='struct.Stdio.html' title=''>Stdio</a></div><div class='block trait'><h2>Traits</h2><a class='trait ' href='trait.Runtime.html' title='The interface to the current runtime.'>Runtime</a></div><div class='block fn'><h2>Functions</h2><a class='fn current' href='fn.at_exit.html' title='Enqueues a procedure to run when the runtime is cleaned up'>at_exit</a><a class='fn ' href='fn.begin_unwind.html' title='This is the entry point of unwinding for fail!() and assert!().'>begin_unwind</a><a class='fn ' href='fn.begin_unwind_fmt.html' title='The entry point for unwinding with a formatted message.'>begin_unwind_fmt</a><a class='fn ' href='fn.cleanup.html' title='One-time runtime cleanup.'>cleanup</a><a class='fn ' href='fn.default_sched_threads.html' title='Get's the number of scheduler threads requested by the environment either `RUST_THREADS` or `num_cpus`.'>default_sched_threads</a><a class='fn ' href='fn.init.html' title='One-time runtime initialization.'>init</a><a class='fn ' href='fn.min_stack.html' title=''>min_stack</a><a class='fn ' href='fn.running_on_valgrind.html' title='Dynamically inquire about whether we're running under V. You should usually not use this unless your test definitely can't run correctly un-altered. Valgrind is there to help you notice weirdness in normal, un-doctored code paths!'>running_on_valgrind</a></div>
    </section>

    <nav class="sub">
        <form class="search-form js-only">
            <div class="search-container">
                <input class="search-input" name="search"
                       autocomplete="off"
                       placeholder="Click or press 'S' to search, '?' for more options..."
                       type="search">
            </div>
        </form>
    </nav>

    <section id='main' class="content fn">
<h1 class='fqn'>Function <a href='../index.html'>std</a>::<a href='index.html'>rt</a>::<a class='fn' href=''>at_exit</a><a class='stability Experimental' title=''>Experimental</a><span class='out-of-band'><a id='src-15725' href='../../rustrt/fn.at_exit.html?gotosrc=15725'>[src]</a></span></h1>
<pre class='rust fn'>pub fn at_exit(f: proc(): <a class='trait' href='../../std/kinds/trait.Send.html' title='std::kinds::Send'>Send</a>)</pre><div class='docblock'><p>Enqueues a procedure to run when the runtime is cleaned up</p>

<p>The procedure passed to this function will be executed as part of the
runtime cleanup phase. For normal rust programs, this means that it will run
after all other tasks have exited.</p>

<p>The procedure is <em>not</em> executed with a local <code>Task</code> available to it, so
primitives like logging, I/O, channels, spawning, etc, are <em>not</em> available.
This is meant for &quot;bare bones&quot; usage to clean up runtime details, this is
not meant as a general-purpose &quot;let&#39;s clean everything up&quot; function.</p>

<p>It is forbidden for procedures to register more <code>at_exit</code> handlers when they
are running, and doing so will lead to a process abort.</p>
</div></section>
    <section id='search' class="content hidden"></section>

    <section class="footer"></section>

    <div id="help" class="hidden">
        <div class="shortcuts">
            <h1>Keyboard shortcuts</h1>
            <dl>
                <dt>?</dt>
                <dd>Show this help dialog</dd>
                <dt>S</dt>
                <dd>Focus the search field</dd>
                <dt>&larrb;</dt>
                <dd>Move up in search results</dd>
                <dt>&rarrb;</dt>
                <dd>Move down in search results</dd>
                <dt>&#9166;</dt>
                <dd>Go to active search result</dd>
            </dl>
        </div>
        <div class="infos">
            <h1>Search tricks</h1>
            <p>
                Prefix searches with a type followed by a colon (e.g.
                <code>fn:</code>) to restrict the search to a given type.
            </p>
            <p>
                Accepted types are: <code>fn</code>, <code>mod</code>,
                <code>struct</code> (or <code>str</code>), <code>enum</code>,
                <code>trait</code>, <code>typedef</code> (or
                <code>tdef</code>).
            </p>
        </div>
    </div>

    

    <script>
        window.rootPath = "../../";
        window.currentCrate = "std";
        window.playgroundUrl = "http://play.rust-lang.org/";
    </script>
    <script src="../../jquery.js"></script>
    <script src="../../main.js"></script>
    <script src="../../playpen.js"></script>
    <script async src="../../search-index.js"></script>
</body>
</html>